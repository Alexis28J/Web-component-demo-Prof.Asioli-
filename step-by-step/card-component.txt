* card-component.js

Questo componente √® uno dei pi√π eleganti del progetto: √® reattivo agli attributi, cio√® si aggiorna automaticamente quando cambiano i valori passati dal componente <super-home>.


üß© 1. Definizione della classe

class CardComponent extends HTMLElement 

Stai creando un nuovo custom element <super-card>.

----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

üéØ 2. observedAttributes

static observedAttributes = ["card-title", "card-image", "card-description"];

Questa riga √® fondamentale.

Significa:

    - ‚ÄúSe uno di questi attributi cambia, chiama automaticamente attributeChangedCallback‚Äù.

Gli attributi osservati sono:

    - card-title
    - card-image
    - card-description

Sono gli stessi che <super-home> inserisce dinamicamente quando crea le card.

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

üß± 3. Costruttore

constructor(){
    super();
    this.shadow = this.attachShadow({ mode: 'open' });
}

    - super() richiama il costruttore di HTMLElement.
    - attachShadow({mode: "open"}) crea lo Shadow DOM, isolando stile e markup.

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

‚ö° 4. connectedCallback()

connectedCallback(){

}

Qui non succede nulla.
Il componente non ha bisogno di inizializzarsi subito, perch√© si costruisce quando riceve gli attributi.

----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

üîÑ 5. attributeChangedCallback()

Questo √® il cuore del componente.

attributeChangedCallback(name, oldValue, newValue) 

Viene chiamato ogni volta che uno degli attributi osservati cambia.

Esempio:

Quando <super-home> fa:

<super-card card-title="Blue Eyes" card-description="..." card-image="...">

il browser chiama attributeChangedCallback() tre volte, una per ogni attributo.


üßπ 5.1 Reset del contenuto

this.shadow.innerHTML = '';

Ogni volta che un attributo cambia, il componente:

   - cancella tutto lo shadow DOM
   - ricostruisce la card da zero

√à un modo semplice per garantire che la card sia sempre aggiornata.


üé® 5.2 Creazione dello stile

const style = document.createElement('style');
style.textContent = `
    .card {
        border: 1px solid #ccc;
        border-radius: 8px;
        padding: 16px;
        max-width: 300px;
        font-family: Arial, sans-serif;
        min-width: 300px;
    }
    .card img {
        max-width: 100%;
        border-radius: 4px;
    }
    .card h2 {
        margin: 12px 0 8px 0;
        font-size: 1.5em;
    }
    .card p {
        color: #555;
    } 
`;
this.shadow.appendChild(style);

Lo stile definisce:

   - bordo e arrotondamento
   - padding
   - larghezza minima e massima
   - stile dell‚Äôimmagine, titolo e descrizione

Tutto √® incapsulato nello shadow DOM.


üß© 5.3 Inserimento dell‚ÄôHTML della card

this.shadow.innerHTML += `
<div class="card">
    <img src="${this.getAttribute('card-image')}" alt="Card Image">
    <h2>${this.getAttribute('card-title')}</h2>
    <p>${this.getAttribute('card-description')}</p>
</div>
`;

Il componente prende i valori dagli attributi e li inserisce nell‚ÄôHTML.

Quindi:

    - card-image ‚Üí URL dell‚Äôimmagine
    - card-title ‚Üí titolo della carta
    - card-description ‚Üí descrizione

---------------------------------------------------------------------------------------------------------------------------------------------------------

üè∑Ô∏è 6. Registrazione del custom element

customElements.define('super-card', CardComponent);

Da questo momento puoi usare:

<super-card></super-card>

e il browser sa come costruirlo.

----------------------------------------------------------------------------------------------------------------------------------------------------------

üìå Riassunto finale
Parte	                    Funzione
observedAttributes	        Dice quali attributi devono triggerare aggiornamenti
attributeChangedCallback	Ricostruisce la card ogni volta che cambiano i dati
Shadow DOM	                Isola stile e markup
HTML dinamico	            Usa gli attributi per riempire immagine, titolo e descrizione
Registrazione	            Attiva 