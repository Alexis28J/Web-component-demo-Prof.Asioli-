* home-component.js

Questo componente carica dati da un servizio esterno, li elabora e crea dinamicamente una lista di <super-card>.


üß© 1. Import del servizio

import { YugiService } from "../services/yugi-service.js";     (RIGA 1)

    - Importa una classe che probabilmente fa una chiamata API per ottenere carte di Yu‚ÄëGi‚ÄëOh.
    - Questo componente dipende da quel servizio per ottenere i dati.
    
------------------------------------------------------------------------------------------------------------------------

üèóÔ∏è 2. Definizione del componente

class HomeComponent extends HTMLElement   (RIGA 3)

Stai creando un nuovo custom element <super-home>.

------------------------------------------------------------------------------------------------------------------------

üß± 3. Costruttore

constructor(){     (RIGHE 5-8)
    super();
    this.shadow = this.attachShadow({ mode: 'open' });
}

- super() richiama il costruttore di HTMLElement.
  HTML Element √® la superclasse che fornisce le funzionalit√† di base per creare un elemento personalizzato.
- attachShadow({mode: "open"}) crea lo Shadow DOM, isolando HTML e CSS del componente.

-----------------------------------------------------------------------------------------------------------------------------


‚ö° 4. connectedCallback()      (RIGA 11)

Questo metodo viene eseguito quando <super-home> viene inserito nella pagina.

üé® 4.1 Creazione dello stile

const style = document.createElement('style');     (RIGHE 13-21)
style.textContent = `
    .card-container {
        display: flex;
        max-width: 100vw;
        overflow-x: auto;
    }
`;
this.shadow.appendChild(style);

- Crea un tag <style>.
- Definisce una classe .card-container che:
- usa display: flex ‚Üí le card sono affiancate orizzontalmente
- overflow-x: auto ‚Üí se sono troppe, compare lo scroll orizzontale
- Lo stile viene aggiunto allo shadow DOM.


üì¶ 4.2 Creazione del contenitore

const container = document.createElement('div');    (RIGHE 23-24)
container.classList.add('card-container');

- Crea un <div> che conterr√† tutte le card.
- Gli assegna la classe definita prima.


üîå 4.3 Creazione del servizio

const service = new YugiService();   (RIGA 26)

- Istanzia il servizio che far√† la chiamata API.


üåê 4.4 Chiamata API e generazione delle card

service.fetchCards().then(data => {                            (RIGHE 27-35)
    for (const card of data) {
        const title = card.name.replaceAll('"', "");
        const description = card.desc.replaceAll('"', "");
        const imageUrl = card.card_images[0].image_url;
        console.log(title, description, imageUrl);
        container.innerHTML += `<super-card card-title="${title}" card-description="${description}" card-image="${imageUrl}"></super-card>`;
    }
});

Vediamo cosa succede:

üîÑ fetchCards()
    - Restituisce una Promise con i dati delle carte.
    - Quando i dati arrivano (.then(data => {...})), parte il ciclo.

üîç Per ogni carta:
    - card.name ‚Üí titolo della carta
    - card.desc ‚Üí descrizione
    - card.card_images[0].image_url ‚Üí URL dell‚Äôimmagine

üßπ replaceAll('"', "")
    - Rimuove eventuali virgolette doppie dai testi, per evitare problemi negli attributi HTML.

üß± Creazione dinamica del componente <super-card>
    - Ogni carta viene trasformata in:

   <super-card 
      card-title="..." 
      card-description="..." 
      card-image="...">
   </super-card>

  Quindi il componente <super-card> riceve i dati tramite attributi HTML.
  (Se avesse messo solo = e non +=, avrebbe sovrascritto il contenuto precedente, mostrando solo l‚Äôultima carta.)


üì• 4.5 Aggiunta del contenitore allo shadow DOM

this.shadow.appendChild(container);    (RIGA 36)

    - Dopo aver popolato il contenitore, viene inserito nello shadow DOM.
    - Il componente √® completo e visibile nella pagina.


--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

üè∑Ô∏è 5. Registrazione del custom element

customElements.define('super-home', HomeComponent);     (RIGA 41)

- Registra il tag <super-home>.
- Ora pu√≤ essere usato nell‚ÄôHTML.

In JavaScript, .define non √® una funzione nativa standard, ma una sintassi comune in librerie e framework (come AngularJS) per definire moduli, componenti o classi, 
separando il codice in unit√† riutilizzabili e gestibili, migliorando l'organizzazione e la modularit√† del progetto, specialmente per applicazioni complesse. 
Serve a creare "mattoni" di codice (moduli) che possono essere importati ed esportati, gestendo le dipendenze e rendendo il codice pi√π strutturato, testabile e manutenibile.

HomeComponent √® un Web Component che mostra una serie di card con titolo, descrizione e immagine basate sui dati recuperati.
Definisco il custom element 'super-home' associandolo alla classe HomeComponent che estende HTMLElement. 
In questo modo posso usare il tag <super-home></super-home> nel mio HTML per includere questo componente.
Il componente utilizza lo shadow DOM per incapsulare il suo stile e il suo contenuto.
Quando il componente viene aggiunto al DOM, il metodo connectedCallback viene chiamato, dove viene creato uno stile per il contenitore delle card e viene popolato con le card ottenute dal servizio YugiService.


------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


üìå Riassunto finale
Parte	                Funzione
Import del servizio	    Recupera i dati delle carte
Costruttore	            Crea lo shadow DOM
Stile	                Imposta layout orizzontale scrollabile
Chiamata API	        Ottiene le carte
Generazione dinamica	Crea per ogni carta
Registrazione	        Attiva il tag 

